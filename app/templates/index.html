{% extends "base.html" %}

{% block content %}
<h1>üí¨ –û–±—â–∏–π —á–∞—Ç</h1>

<div class="chat-box mb-3" id="chat">
    {% for msg in messages %}
        <div class="message mb-2">
            <strong>
                <a href="{{ url_for('main.profile', user_id=msg.author.id) }}" class="text-decoration-none">
                    {{ msg.author.display_name or msg.author.login }}
                </a>
            </strong> 
            <small class="text-muted">{{ msg.timestamp.strftime('%H:%M') }}</small>:
            <span>{{ msg.body }}</span>
        </div>
    {% endfor %}
</div>

{% if not current_user.is_banned %}
    <form method="POST" class="d-flex">
        <input type="text" name="message" class="form-control me-2" placeholder="–ù–∞–ø–∏—à–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å..." required>
        <button type="submit" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </form>
{% else %}
    <div class="alert alert-danger">üö´ –í—ã –∑–∞–±–∞–Ω–µ–Ω—ã –∏ –Ω–µ –º–æ–∂–µ—Ç–µ –ø–∏—Å–∞—Ç—å –≤ —á–∞—Ç.</div>
{% endif %}

<script>
    // –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —á–∞—Ç–∞ –≤–Ω–∏–∑ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    var chatBox = document.getElementById("chat");
    chatBox.scrollTop = chatBox.scrollHeight;
</script>
{% endblock %}