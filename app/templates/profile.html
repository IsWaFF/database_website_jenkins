{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-md-4 text-center">
        <img src="{{ url_for('static', filename='default.jpg') }}" class="rounded-circle mb-3" width="150" height="150">
        <h3>{{ user.display_name or user.login }}</h3>
        <p class="text-muted">@{{ user.login }}</p>
        
        <div class="d-flex justify-content-center gap-3 mb-3">
            <div><b>{{ user.followers.count() }}</b><br>–ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</div>
            <div><b>{{ user.achievements|length }}</b><br>–ê—á–∏–≤–æ–∫</div>
        </div>

        {% if current_user.id != user.id %}
            {% if current_user.is_following(user) %}
                <a href="{{ url_for('main.follow', user_id=user.id) }}" class="btn btn-outline-danger">–û—Ç–ø–∏—Å–∞—Ç—å—Å—è</a>
            {% else %}
                <a href="{{ url_for('main.follow', user_id=user.id) }}" class="btn btn-primary">–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è</a>
            {% endif %}
        {% endif %}
    </div>

    <div class="col-md-8">
        <div class="card mb-4">
            <div class="card-header">–û —Å–µ–±–µ</div>
            <div class="card-body">
                {% if current_user.id == user.id %}
                    <form action="{{ url_for('main.edit_profile') }}" method="POST">
                        <div class="mb-2">
                            <label>–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è</label>
                            <input type="text" name="display_name" class="form-control" value="{{ user.display_name or '' }}">
                        </div>
                        <div class="mb-2">
                            <label>–ë–∏–æ–≥—Ä–∞—Ñ–∏—è</label>
                            <textarea name="bio" class="form-control">{{ user.bio or '' }}</textarea>
                        </div>
                        <button type="submit" class="btn btn-sm btn-secondary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </form>
                {% else %}
                    <p>{{ user.bio or "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∏—á–µ–≥–æ –æ —Å–µ–±–µ –Ω–µ —Ä–∞—Å—Å–∫–∞–∑–∞–ª." }}</p>
                {% endif %}
            </div>
        </div>

        <h4>üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h4>
        <div class="d-flex gap-2">
            {% for achievement in user.achievements %}
                <div class="text-center" title="{{ achievement.description }}">
                    <div class="bg-warning rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                        ‚òÖ
                    </div>
                    <small>{{ achievement.name }}</small>
                </div>
            {% else %}
                <p class="text-muted">–ê—á–∏–≤–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç :(</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}